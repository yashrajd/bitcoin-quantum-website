/**
 * AddressVulnerability.vue - Bitcoin Address Vulnerability Guide
 */

<script setup>
import { useHead } from '@vueuse/head'
import PageContainer from '../../components/PageContainer.vue'
import Breadcrumbs from '../../components/Breadcrumbs.vue'

useHead({
  title: 'Vulnerable vs Safe Addresses - Bitcoin Quantum Hub',
  meta: [{
    name: 'description',
    content: 'Which Bitcoin addresses are at risk from quantum attacks and why.'
  }]
})

const addressTypes = [
  {
    type: 'P2PK (Pay-to-Public-Key)',
    risk: 'Critical',
    riskClass: 'critical',
    btc: '~1.8M BTC',
    description: 'These addresses expose public keys directly on the blockchain, including Satoshi\'s original coins. Most vulnerable to quantum attacks.',
    examples: 'Early Bitcoin addresses (2009-2010)'
  },
  {
    type: 'Reused Addresses',
    risk: 'High',
    riskClass: 'high',
    btc: 'Variable',
    description: 'Addresses that have sent transactions expose their public keys. Reusing addresses compounds this risk.',
    examples: 'Any address with outgoing transactions'
  },
  {
    type: 'Taproot (P2TR)',
    risk: 'High',
    riskClass: 'high',
    btc: 'Growing',
    description: 'Taproot\'s key-path spend feature exposes public keys. While offering privacy benefits, they\'re vulnerable to quantum attacks.',
    examples: 'bc1p... addresses'
  },
  {
    type: 'Never-Spent Hashed Addresses',
    risk: 'Lower',
    riskClass: 'lower',
    btc: 'Majority',
    description: 'Addresses that have only received funds keep public keys hidden behind SHA-256 and RIPEMD-160 hashes. More secure, but not quantum-proof.',
    examples: 'P2PKH (1...), P2SH (3...) with no spends'
  }
]
</script>

<template>
  <PageContainer>
    <Breadcrumbs :items="breadcrumbs" />
    
    <h1>Vulnerable vs Safe Addresses</h1>
    <p class="lead">
      Not all Bitcoin addresses are equally vulnerable to quantum attacks. The risk level 
      depends on whether your public key has been exposed on the blockchain.
    </p>
    
    <div class="vulnerability-table">
      <div
        v-for="addr in addressTypes"
        :key="addr.type"
        class="address-row"
        :class="`risk-${addr.riskClass}`"
      >
        <div class="address-header">
          <h3>{{ addr.type }}</h3>
          <span class="risk-badge" :class="`badge-${addr.riskClass}`">
            {{ addr.risk }} Risk
          </span>
        </div>
        <div class="address-details">
          <div class="detail-item">
            <span class="detail-label">BTC Affected:</span>
            <span class="detail-value">{{ addr.btc }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Examples:</span>
            <span class="detail-value">{{ addr.examples }}</span>
          </div>
        </div>
        <p class="address-description">{{ addr.description }}</p>
      </div>
    </div>
    
    <div class="recommendations">
      <h2>Recommendations</h2>
      <ul>
        <li>Avoid address reuse - generate a new address for each transaction</li>
        <li>If you hold funds in P2PK addresses, consider migrating to newer address types</li>
        <li>Stay informed about quantum-resistant address formats like BIP-360</li>
        <li>For long-term holdings, follow developments in post-quantum cryptography</li>
      </ul>
    </div>
  </PageContainer>
</template>

<style scoped>
.lead {
  font-size: var(--text-lg);
  color: var(--text-secondary);
  margin-bottom: var(--space-10);
}

.vulnerability-table {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  margin-bottom: var(--space-10);
}

.address-row {
  background-color: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--border-radius-lg);
  padding: var(--space-6);
  border-left: 4px solid var(--border-primary);
}

.address-row.risk-critical {
  border-left-color: var(--accent-danger);
}

.address-row.risk-high {
  border-left-color: var(--status-warning);
}

.address-row.risk-lower {
  border-left-color: var(--status-success);
}

.address-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);
  flex-wrap: wrap;
  gap: var(--space-2);
}

.address-header h3 {
  margin: 0;
  font-size: var(--text-lg);
}

.risk-badge {
  padding: var(--space-1) var(--space-3);
  border-radius: 4px;
  font-family: var(--font-family-mono);
  font-size: var(--text-xs);
  font-weight: 600;
  text-transform: uppercase;
}

.badge-critical {
  background-color: rgba(255, 51, 102, 0.2);
  color: var(--accent-danger);
}

.badge-high {
  background-color: rgba(255, 183, 3, 0.2);
  color: var(--status-warning);
}

.badge-lower {
  background-color: rgba(0, 255, 136, 0.2);
  color: var(--status-success);
}

.address-details {
  display: flex;
  gap: var(--space-6);
  margin-bottom: var(--space-3);
  flex-wrap: wrap;
}

.detail-item {
  display: flex;
  gap: var(--space-2);
}

.detail-label {
  color: var(--text-muted);
  font-size: var(--text-sm);
}

.detail-value {
  color: var(--text-secondary);
  font-size: var(--text-sm);
  font-weight: 600;
}

.address-description {
  color: var(--text-secondary);
  margin: 0;
}

.recommendations {
  background-color: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--border-radius-lg);
  padding: var(--space-6);
}

.recommendations h2 {
  margin-bottom: var(--space-4);
}

.recommendations ul {
  margin: 0;
  padding-left: var(--space-5);
  color: var(--text-secondary);
}

.recommendations li {
  margin-bottom: var(--space-2);
}

@media (max-width: 768px) {
  .address-details {
    flex-direction: column;
    gap: var(--space-2);
  }
}
</style>
